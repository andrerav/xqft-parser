digraph AST {
edge [color=black, dir=both, weight=1, fontcolor=black, arrowhead=none, arrowtail=normal]
node [shape=plaintext]
  numberate1 -> project2
    project2 -> select3
      select3 -> hhjoin4
        hhjoin4 -> union5
          union5 -> project6
            project6 -> project7
              project7 -> numberate8
                numberate8 -> union9
                  union9 -> project10
                    project10 -> make11
make11 [label="make(name:=[index, value], [1], [10])"]
project10 [label="project(sprIdx=1,index,value; .."]
                    union9 -> project12
                      project12 -> make13
make13 [label="make(name:=[index, value], [1], [20])"]
project12 [label="project(sprIdx=2,index,value; .."]
union9 [label="union(; .."]
numberate8 [label="numberate(index,[sprIdx,index],[]; .."]
project7 [label="project([index = 1, anumb = index, value]; .."]
project6 [label="project(index, alt=1, value, anumb; .."]
            union5 -> project14
              project14 -> make15
make15 [label="make(name:=[index, value], [1], [15])"]
project14 [label="project(index, alt=2, value, anumb; .."]
union5 [label="union(; .."]
          hhjoin4 -> project16
            project16 -> group17
              group17 -> project18
                project18 -> hhjoin19
                  hhjoin19 -> project20
                    project20 -> numberate21
                      numberate21 -> union22
                        union22 -> project23
                          project23 -> make24
make24 [label="make(name:=[index, value], [1], [10])"]
project23 [label="project(sprIdx=1,index,value; .."]
                          union22 -> project25
                            project25 -> make26
make26 [label="make(name:=[index, value], [1], [20])"]
project25 [label="project(sprIdx=2,index,value; .."]
union22 [label="union(; .."]
numberate21 [label="numberate(index,[sprIdx,index],[]; .."]
project20 [label="project([index = 1, anumb = index, value]; .."]
                    hhjoin19 -> make27
make27 [label="make(name:=[index, value], [1], [15])"]
hhjoin19 [label="hhjoin([],[],[lvalue = l.value, rvalue = r.value, anumb]; .."]
project18 [label="project(value=gt(lvalue, rvalue),anumb; .."]
group17 [label="group((anumb), max(value); .."]
project16 [label="project(index=1, value=max, anumb; .."]
hhjoin4 [label="hhjoin([anumb],[anumb], [index = l.index, lvalue = l.value, rvalue = r.value, anumb]; .."]
select3 [label="select(ifthenelse(xqBoolean(rvalue), eq(alt,1), eq(alt,2)); .."]
project2 [label="project(value = lvalue, anumb; .."]
numberate1 [label="numberate(index,[anumb,index],[anumb]; .."]

}