\section{Test results}
\subsection{Unit tests}
Unit testing was used solely for regression testing, so they did not directly 
produce any results of particular interest.

However, it is important to note that after adding a custom TokenStream class to
allow the lexer to be under control of the parser, the gUnit framework was no
longer capable of executing its test suite. The reason for this is
incompatability with the custom TokenStream class. In the current state of
affairs, gUnit will simply block and wait for more data, leaving the programing
hanging indefinitely. 

\subsection{Manual coverage tests}
\label{sect:tests:manual}
\textbf{\LARGE //TODO:} 

maa oppdateres

To test for standards compliance, we created a manual test harness for running
the complete XQuery Test Suite\cite{w3c05} consisting of 12584 queries. Our
initial tests showed a 54\% coverage (6846 queries successfully parsed). Further
investigation revealed that out of all the errors, a total of 47\% were related
to NCName token ambiguities. Without these errors, coverage would increase to
76\%. Much effort was then spent on solving the remaining NCName ambiguities.

One peculiarity about ANTLR was the fact that the nextToken() method in the base
lexer class would catch recognition exceptions, display an error to stderr, and
then attempt to recover from the exception. Overriding this method and handling
the exception properly was not possible, since the nextToken() method is not
able to throw any exceptions. This obvious design flaw had been discussed on
several occasions on the ANTLR mailing list\cite{antlrmail}, but has not yet
been adressed by the ANTLR developers.

A proposal to a possible solution to this limitation is briefly presented in
section \ref{sect:summary:future_work}.