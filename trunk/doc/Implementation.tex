\chapter{Implementation}
\label{chapter:implementation}

\begin{itemize}
  \item intro
  \item Vi lager en liten prototype = ``proof of concept'' -> et begrep vi m\aa~bruke =)
  \item VarRefs m\aa~sendes oppover fra child nodes (ref til tainting deps)
  \item Optimalisering: child nodes vet om de er atomiske/singleton eller ikke
\end{itemize}

\begin{itemize}
  \item Bruk av parseren (den som er generert av antlr osv), XQFTTree-klassen,
  evt. UML
  \item Interfacing av parseren mot oversetteren v\aa r (som oversetter til
  relalg) og UML
  \item Bygging av relasjonsalgebra-tre, UML av operatorklassene
  \item Implementering av visitors
  \item Scoping og symtab (nok en gang..)
  \item hvordan metadata som varrefs og singletonindikering blir sendt oppover
  (Metadata)
  \item Implementering av ``tainting dependencies''
  \item Dataflyt (grammatikk -> antlr -> parser, xquery -> parser -> visitor ->
  relalg)
  \item Visible external API
  \item Interface til systemet p\aa~ kommandolinjen
  \item Optimaliseringer, om noen? 
\end{itemize}


\section{Using the XQFT Parser}
\subsection{Basics and API}
\subsection{The XQFTTree class}
\subsection{Interfacing the XQFT Parser}

\section{Constructing the MQL algebra tree}
\subsection{Operators and parameters}
\subsection{Concepts}
\subsection{Usage}

\section{Context-sensitive visitor}
\subsection{Basics}
\subsection{Modifying the XQFTTree class}
\subsection{Rewrite visitor}
\subsection{Translation visitor}

\section{Scoping and symbol tables}

\section{Passing metadata between nodes}
\subsection{Variable references}
\subsection{Singleton nodes}
\subsection{The TraverseReturn class}

\section{Tainting dependencies}
\subsection{FLWOR expressions}
\subsection{Sequences}

\section{Data flow}

\section{Visible external API}

\section{Command line interface}

\section{Optimalisations?}


\section{Summary}
\label{sect:impl:summary}
\begin{itemize}
  \item sammendrag av dette kap
\end{itemize}