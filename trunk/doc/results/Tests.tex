\label{sect:results:tests}
\section{Unit tests}
\label{sect:results:tests:unit}
Unit testing was used solely for regression testing, so they did not directly 
produce any results of particular interest.

However, it is important to note that after adding a custom \verb!TokenStream! class to
allow the lexer to be under control of the parser, the gUnit framework was no
longer capable of executing its test suite. The reason for this is
incompatability with the custom \verb!TokenStream! class. In the current state of
affairs, gUnit will simply block and wait for more data, leaving the program
hanging indefinitely. 

\section{Manual Compliance Tests}
\label{sect:tests:manual}
To test for standards compliance, we created a manual test harness for running
the complete XQuery Test Suite\cite{w3c05} consisting of 12584 queries. Our
initial tests showed a 54\% compliance (6846 queries successfully parsed). Further
investigation revealed that out of all the errors, a total of 47\% were related
to a erroneous NCName and keyword differanciating implementation (see section
\ref{sect:discussion:deadEnds}). Without these errors, compliance would increase
to 76\%. After some effort resolving these ambiguities as well as other minor
lexer bugs, the compliance increased to 88\%.

After removing the constraint of reserved keywords (see section
\ref{sect:impl:reserved_keywords}, the compliance increased further to 99.3\%.
These results, as well as elaborations for the remaining 0.7\%, are thoroughly
discussed in section \ref{sect:discussion:coverageResults}.

One peculiarity about ANTLR was the fact that the \verb!nextToken()! method in
the base lexer class would catch recognition exceptions, display an error to \verb!stderr!, and
then attempt to recover from the exception. Overriding this method and handling
the exception properly was not possible, since the \verb!nextToken()! method is not
able to throw any exceptions. This design flaw had been discussed on
several occasions on the ANTLR mailing list\cite{antlrmail}, but has not yet
been adressed by the ANTLR developers.

A proposal to a possible solution to this limitation is briefly presented in
section \ref{sect:future_work:lexer_error_handling}.